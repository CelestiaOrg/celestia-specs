<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Node types - Celestia Specifications</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Celestia Specifications</a></li><li class="chapter-item expanded "><a href="../specs/specification.html"><strong aria-hidden="true">1.</strong> Specification</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../specs/architecture.html"><strong aria-hidden="true">1.1.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="../specs/data_structures.html"><strong aria-hidden="true">1.2.</strong> Data Structures</a></li><li class="chapter-item expanded "><a href="../specs/consensus.html"><strong aria-hidden="true">1.3.</strong> Consensus</a></li><li class="chapter-item expanded "><a href="../specs/block_proposer.html"><strong aria-hidden="true">1.4.</strong> Block Proposer</a></li><li class="chapter-item expanded "><a href="../specs/networking.html"><strong aria-hidden="true">1.5.</strong> Networking</a></li><li class="chapter-item expanded "><a href="../specs/light_client.html"><strong aria-hidden="true">1.6.</strong> Light client</a></li><li class="chapter-item expanded "><a href="../specs/node_types.html" class="active"><strong aria-hidden="true">1.7.</strong> Node types</a></li></ol></li><li class="chapter-item expanded "><a href="../rationale/rationale.html"><strong aria-hidden="true">2.</strong> Rationale</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rationale/rewards.html"><strong aria-hidden="true">2.1.</strong> Block Rewards</a></li><li class="chapter-item expanded "><a href="../rationale/distributing_rewards.html"><strong aria-hidden="true">2.2.</strong> Distributing Rewards and Penalties</a></li><li class="chapter-item expanded "><a href="../rationale/fork_choice_das.html"><strong aria-hidden="true">2.3.</strong> Fork Choice Rule with Data Availability Sampling</a></li><li class="chapter-item expanded "><a href="../rationale/message_block_layout.html"><strong aria-hidden="true">2.4.</strong> Message Layout</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Celestia Specifications</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/celestiaorg/celestia-specs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="node-types"><a class="header" href="#node-types">Node Types</a></h1>
<ul>
<li><a href="#node-parameters">Node Parameters</a>
<ul>
<li><a href="#block-headers">Block Headers</a>
<ul>
<li><a href="#compact-block-headers">Compact Block Headers</a></li>
<li><a href="#extended-block-headers">Extended Block Headers</a></li>
</ul>
</li>
<li><a href="#block-bodies">Block Bodies</a>
<ul>
<li><a href="#no-bodies">No Bodies</a></li>
<li><a href="#sampled-bodies">Sampled Bodies</a></li>
<li><a href="#partial-bodies">Partial Bodies</a></li>
<li><a href="#full-bodies">Full Bodies</a></li>
</ul>
</li>
<li><a href="#transactions">Transactions</a>
<ul>
<li><a href="#no-transactions">No Transactions</a></li>
<li><a href="#full-transactions">Full Transactions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#node-type-definitions">Node Type Definitions</a></li>
</ul>
<h2 id="node-parameters"><a class="header" href="#node-parameters">Node Parameters</a></h2>
<p>Nodes that run the <a href="./consensus.html">Celestia protocol</a> have a number of parameters that can be tweaked with regards to which parts of the data is downloaded, validated, and/or stored. All nodes process the <code>header</code> and <code>lastCommit</code> fields of each <a href="./data_structures.html#block">block</a>, but can handle the <code>availableDataHeader</code> and <code>availableData</code> fields differently.</p>
<p>We define security assumptions as assumptions under which a given node is guaranteed accountable consensus safety (i.e. that finalized blocks will remain in the prefix of all future sequences of blocks accepted by the node, unless a supermajority (&gt; 2/3) of validator voting power performs an attributable—and thus <a href="./consensus.html#blockavailabledataevidencedata">penalizable</a>—malicious action) and state safety (i.e. that an invalid state transition will not be included in the chain accepted by the node).</p>
<h3 id="block-headers"><a class="header" href="#block-headers">Block Headers</a></h3>
<h4 id="compact-block-headers"><a class="header" href="#compact-block-headers">Compact Block Headers</a></h4>
<p>Nodes that only process compact block headers will download and validate the <a href="./data_structures.html#header">block header</a> <em>without</em> downloading or validating the <code>availableDataHeader</code> <a href="./data_structures.html#block">block</a> field that is committed to in the block header. These nodes cannot perform Data Availability Sampling on <a href="#block-bodies">block bodies</a>.</p>
<p>Secure under an honest supermajority of validator voting power and a weak subjectivity assumption.</p>
<h4 id="extended-block-headers"><a class="header" href="#extended-block-headers">Extended Block Headers</a></h4>
<p>Nodes that process extended block headers will download and validate both the <a href="#compact-block-headers">compact block header</a> and the
<a href="./data_structures.html##availabledataheader"><code>availabledataheader</code></a> <a href="./data_structures.html#block">block</a> field. These nodes can perform Data Availability Sampling on <a href="#block-bodies">block bodies</a>, and their security assumptions depend on how block bodies are handled.</p>
<h3 id="block-bodies"><a class="header" href="#block-bodies">Block Bodies</a></h3>
<p>Block bodies (the <code>availableData</code> <a href="./data_structures.html#block">block</a> field) can be downloaded and optionally stored and/or served. Storing and serving block body data has no effect on node security assumptions.</p>
<h4 id="no-bodies"><a class="header" href="#no-bodies">No Bodies</a></h4>
<p>Nodes that only process <a href="#compact-block-headers">compact block headers</a> have no need for block bodies and simply do not process block bodies.</p>
<p>Secure under an honest supermajority majority of validator voting power and a weak subjectivity assumption.</p>
<h4 id="sampled-bodies"><a class="header" href="#sampled-bodies">Sampled Bodies</a></h4>
<p>These nodes perform Data Availability Sampling on block bodies.</p>
<p>Secure under an honest minority of nodes and a weak subjectivity assumption.</p>
<h4 id="partial-bodies"><a class="header" href="#partial-bodies">Partial Bodies</a></h4>
<p>These nodes fully download and validate <a href="./data_structures.html#2d-reed-solomon-encoding-scheme">the erasure coding</a> of a random subset of block bodies (configurable locally). Since the erasure coding of each block is stateless, nodes that perform validation of partial bodies contribute to the overall security of the network by being able to produce <a href="./data_structures.html#invalid-erasure-coding">fraud proofs of invalid erasure coding</a>.</p>
<p>Secure under an honest minority of nodes and a weak subjectivity assumption.</p>
<h4 id="full-bodies"><a class="header" href="#full-bodies">Full Bodies</a></h4>
<p>These nodes fully download and validate <a href="./data_structures.html#2d-reed-solomon-encoding-scheme">the erasure coding</a> of all block bodies.</p>
<p>If <a href="#no-transactions">transactions are not processed</a>, secure under an honest minority of nodes and a weak subjectivity assumption. If <a href="#full-transactions">transactions are processed</a>, secure under a weak subjectivity assumption.</p>
<h3 id="transactions"><a class="header" href="#transactions">Transactions</a></h3>
<h4 id="no-transactions"><a class="header" href="#no-transactions">No Transactions</a></h4>
<p>These nodes process do not process requests <a href="./data_structures.html#arranging-available-data-into-shares">with a reserved namespace ID</a> and thus to not know the chain state without relying on a third party.</p>
<p>At most secure under an honest minority of nodes and a weak subjectivity assumption.</p>
<h4 id="full-transactions"><a class="header" href="#full-transactions">Full Transactions</a></h4>
<p>Nodes that wish to produce new blocks must know the <a href="./data_structures.html#state">chain state</a>. Processing all block bodies is actually not needed to know the Celestia state, as <a href="../rationale/message_block_layout.html">transactions that pay for message inclusion commit to messages</a>. These nodes process all requests <a href="./data_structures.html#arranging-available-data-into-shares">with a reserved namespace ID</a> from block bodies and perform Data Availability Sampling for the remaining (message) data.</p>
<p>At most secure under a weak subjectivity assumption.</p>
<h2 id="node-type-definitions"><a class="header" href="#node-type-definitions">Node Type Definitions</a></h2>
<p>For convenience, we will define several common parameter configurations:</p>
<ol>
<li><a href="https://en.bitcoin.it/wiki/Full_node">Full nodes</a> provide the strongest security guarantees.
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#full-bodies">Full Bodies</a>
<ul>
<li>Storage: Not stored beyond a parameter</li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#full-transactions">Full Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: produce, consume</li>
<li>Erasure coding: produce, consume</li>
</ul>
</li>
</ul>
</li>
<li>Partial nodes are capable of producing fraud proofs of invalid transactions and contribute to validating the erasure coding of random blocks.
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#partial-bodies">Partial Bodies</a>
<ul>
<li>Storage: Not stored beyond a parameter</li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#full-transactions">Full Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: produce, consume</li>
<li>Erasure coding: produce (partial), consume</li>
</ul>
</li>
</ul>
</li>
<li>Light nodes perform Data Availability Sampling (DAS) and are secure under an honest minority.
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#sampled-bodies">Sampled Bodies</a>
<ul>
<li>Storage: Not stored beyond a parameter</li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#no-transactions">No Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: consume</li>
<li>Erasure coding: consume</li>
</ul>
</li>
</ul>
</li>
<li>Superlight nodes do not perform DAS and are secure under an honest majority.
<ul>
<li>Block headers: <a href="#compact-block-headers">Compact Block Headers</a></li>
<li>Block bodies: <a href="#no-bodies">No Bodies</a>
<ul>
<li>Storage: Not stored</li>
<li>Serving: Not served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#no-transactions">No Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: consume</li>
<li>Erasure coding: consume</li>
</ul>
</li>
</ul>
</li>
<li>Storage nodes provide the same security guarantees as full nodes.
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#full-bodies">Full Bodies</a>
<ul>
<li>Storage: Fully stored in <a href="./data_structures.html#2d-reed-solomon-encoding-scheme">erasure-coded form</a></li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#full-transactions">Full Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: produce, consume</li>
<li>Erasure coding: produce, consume</li>
</ul>
</li>
</ul>
</li>
<li>Partial storage nodes provide the same security guarantees as partial nodes.
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#full-bodies">Full Bodies</a>
<ul>
<li>Storage: Partially stored in <a href="./data_structures.html#2d-reed-solomon-encoding-scheme">erasure-coded form</a></li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#full-transactions">Full Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: produce, consume</li>
<li>Erasure coding: produce (partial), consume</li>
</ul>
</li>
</ul>
</li>
<li>Validator nodes are identical to full nodes, but should additionally create and sign consensus messages (proposals, votes, etc.).
<ul>
<li>Block headers: <a href="#extended-block-headers">Extended Block Headers</a></li>
<li>Block bodies: <a href="#full-bodies">Full Bodies</a>
<ul>
<li>Storage: Not stored beyond a parameter</li>
<li>Serving: Served to the network</li>
</ul>
</li>
<li>Transactions: <a href="#full-transactions">Full Transactions</a></li>
<li>Fraud proofs:
<ul>
<li>State transition: produce, consume</li>
<li>Erasure coding: produce, consume</li>
</ul>
</li>
</ul>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../specs/light_client.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../rationale/rationale.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../specs/light_client.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../rationale/rationale.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
